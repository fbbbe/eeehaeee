<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.geometry.Pos?>
<?import javafx.scene.control.SplitPane?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="dongggg.ConceptNoteController"
            styleClass="root-pane">

    <!-- 상단: 제목 -->
    <top>
        <VBox spacing="8">
            <padding>
                <Insets top="16" right="20" bottom="8" left="20"/>
            </padding>
            <children>
                <TextField fx:id="titleField"
                           promptText="제목을 입력하세요..."
                           styleClass="note-pill-input"/>
            </children>
        </VBox>
    </top>

    <!-- 중앙: 개념/설명 영역을 ScrollPane 으로 감싸서 전체 뷰 스크롤 가능 -->
    <center>
        <ScrollPane fitToWidth="true"
                    hbarPolicy="NEVER"
                    vbarPolicy="AS_NEEDED"
                    styleClass="transparent-scroll-pane">
            <content>
                <VBox spacing="8">
                    <padding>
                        <Insets top="4" right="20" bottom="8" left="20"/>
                    </padding>
                    <children>

                        <!-- 헤더: '개념 입력' / '설명 입력' -->
                        <HBox spacing="8">
                            <children>
                                <Label text="개념 입력" styleClass="note-date"/>
                                <Pane HBox.hgrow="ALWAYS"/>
                                <Label text="설명 입력" styleClass="note-date"/>
                            </children>
                        </HBox>

                        <!-- ✅ 좌우로 나뉘는 SplitPane (세로선 드래그로 좌우 비율 조절) -->
                        <SplitPane orientation="HORIZONTAL"
                                   dividerPositions="0.25"
                                   styleClass="concept-split-pane">
                            <items>

                                <!-- 왼쪽: 개념 입력 칼럼 (ScrollPane 제거) -->
                                <VBox spacing="8">
                                    <children>
                                        <!-- 여기에 개념 TextArea 들이 세로로 쌓인다 -->
                                        <VBox fx:id="conceptContainer" spacing="12"/>
                                    </children>
                                </VBox>

                                <!-- 오른쪽: 설명 입력 칼럼 (ScrollPane 제거) -->
                                <VBox spacing="8">
                                    <children>
                                        <!-- 여기에 설명 TextArea 들이 세로로 쌓인다 -->
                                        <VBox fx:id="explanationContainer" spacing="12"/>
                                    </children>
                                </VBox>

                            </items>
                        </SplitPane>

                        <!-- 하단: 추가 버튼 -->
                        <HBox alignment="CENTER" spacing="8">
                            <children>
                                <Label text="추가" styleClass="note-date"/>
                                <Button text="＋"
                                        onAction="#onAddPair"
                                        styleClass="concept-plus-button"/>
                            </children>
                        </HBox>

                    </children>
                </VBox>
            </content>
        </ScrollPane>
    </center>

    <!-- 하단: 상태 + 닫기/저장 -->
    <bottom>
        <HBox spacing="8" alignment="CENTER_RIGHT">
            <padding>
                <Insets top="8" right="20" bottom="16" left="20"/>
            </padding>
            <children>
                <Label fx:id="statusLabel" styleClass="note-date" HBox.hgrow="ALWAYS"/>

                <Button text="닫기" onAction="#onCancel"
                        styleClass="pill-button, pill-button-outline"/>

                <Button text="저장" onAction="#onSaveAll"
                        styleClass="pill-button, pill-button-primary"/>
            </children>
        </HBox>
    </bottom>

</BorderPane>
