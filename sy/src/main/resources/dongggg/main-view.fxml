<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.geometry.Pos?>
<?import javafx.scene.shape.SVGPath?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="dongggg.MainController"
            styleClass="root-pane, main-root">

    <top>
        <VBox spacing="18" styleClass="main-header">
            <padding>
                <Insets top="28" right="32" bottom="16" left="32"/>
            </padding>
            <children>
                <HBox alignment="CENTER_LEFT" spacing="16" styleClass="profile-header"
                      onMouseClicked="#onOpenMascot">
                    <StackPane prefWidth="60" prefHeight="60"
                               styleClass="avatar-circle, main-avatar"
                               onMouseClicked="#onOpenMascot">
                        <children>
                            <ImageView fx:id="avatarImageView"
                                       fitWidth="100" fitHeight="100"
                                       preserveRatio="true" smooth="true"
                                       styleClass="main-avatar-image"/>
                        </children>
                    </StackPane>

                    <VBox spacing="4">
                        <Label text="동그리" styleClass="profile-name, main-profile-name"/>
                        <Label text="오늘도 한 장씩 성장해볼까?" styleClass="profile-subtitle, main-profile-subtitle"/>
                    </VBox>

                    <Pane HBox.hgrow="ALWAYS"/>
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="12">
                    <HBox spacing="10" alignment="CENTER_LEFT" HBox.hgrow="ALWAYS"
                          styleClass="search-container, main-search">
                        <SVGPath
                            content="M19 11a8 8 0 1 1 -16 0a8 8 0 1 1 16 0z M21 21L16.66 16.66"      
                            stroke="#A855DD"
                            fill="transparent"
                            strokeWidth="1.8"
                            style="-fx-scale-x: 0.85 ; -fx-scale-y: 0.85;" />
                        <TextField fx:id="searchField"
                                   promptText="노트 검색 또는 폴더명 검색..."  
                                   HBox.hgrow="ALWAYS"
                                   styleClass="search-field"/>
                    </HBox>

                    <Button onAction="#onNewFolder"
                            prefWidth="48" prefHeight="48"
                            styleClass="folder-add-button">
                        <graphic>
                            <StackPane prefWidth="20" prefHeight="20" alignment="CENTER">
                                <!-- + 아이콘 -->
                                <SVGPath
                                    content="M12 10v6 M9 13h6 M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"
                                    stroke="#FFFFFF"
                                    fill="transparent"
                                    strokeWidth="2"
                                    strokeLineCap="ROUND"
                                    style="-fx-scale-x:0.9; -fx-scale-y:0.9;"/>
                            </StackPane>
                        </graphic>
                    </Button>

                    <Button fx:id="newNoteButton"
                            onAction="#onNewNote"
                            prefWidth="48" prefHeight="48"
                            styleClass="accent-icon-button">
                        <graphic>
                            <StackPane prefWidth="20" prefHeight="20" alignment="CENTER">
                                <!-- + 아이콘 -->
                                <SVGPath
                                    content="M5 12h14 M12 5v14"
                                    stroke="#FFFFFF"
                                    fill="transparent"
                                    strokeWidth="2"
                                    strokeLineCap="ROUND"
                                    style="-fx-scale-x:0.9; -fx-scale-y:0.9;"/>
                            </StackPane>
                        </graphic>
                    </Button>
                </HBox>
            </children>
        </VBox>
    </top>

    <center>
        <ScrollPane fitToWidth="true"
                    hbarPolicy="NEVER"
                    styleClass="transparent-scroll-pane">
            <content>
                <HBox alignment="TOP_CENTER">
                    <children>
                        <VBox spacing="28" prefWidth="960" maxWidth="960"
                              styleClass="main-content">
                            <padding>
                                <Insets top="16" right="0" bottom="40" left="0"/>
                            </padding>
                            <children>

                                <VBox spacing="12">
                                    <children>
                                        <HBox spacing="8" alignment="CENTER_LEFT">
                                            <SVGPath
                                                content="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"      
                                                stroke="#A855DD"
                                                fill="transparent"
                                                strokeWidth="1.8"
                                                style="-fx-scale-x: 0.85 ; -fx-scale-y: 0.85;" />
                                            <Label text="폴더" styleClass="section-heading"/>
                                        </HBox>
                                        <ScrollPane fx:id="folderScroll"
                                                    hbarPolicy="NEVER"
                                                    vbarPolicy="NEVER"
                                                    pannable="true"
                                                    fitToHeight="true"
                                                    styleClass="folder-scroll">
                                            <content>
                                                <HBox fx:id="folderRow"
                                                      spacing="16"
                                                      alignment="CENTER_LEFT"/>
                                            </content>
                                        </ScrollPane>
                                    </children>
                                </VBox>

                                <VBox spacing="12">
                                    <children>
                                        <HBox spacing="8" alignment="CENTER_LEFT">
                                            <StackPane prefWidth="24" prefHeight="24" alignment="CENTER">
                                                <SVGPath
                                                    content="M12 22a10 10 0 1 1 0-20 10 10 0 0 1 0 20z
                                                            M12 6v6l4 2"
                                                    stroke="#A855DD"
                                                    fill="transparent"
                                                    strokeWidth="1.8"
                                                    strokeLineCap="ROUND"
                                                    strokeLineJoin="ROUND"
                                                    style="-fx-scale-x:0.9; -fx-scale-y:0.9;" />
                                            </StackPane>
                                            <Label fx:id="notesSectionLabel" text="최근 노트" styleClass="section-heading"/>
                                        </HBox>
                                        <VBox fx:id="recentNotesBox" spacing="12"/>
                                    </children>
                                </VBox>

                            </children>
                        </VBox>
                    </children>
                </HBox>
            </content>
        </ScrollPane>
    </center>

</BorderPane>
